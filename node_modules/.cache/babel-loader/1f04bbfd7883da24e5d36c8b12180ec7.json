{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/warrenmason/Documents/MoonWalkerSwap/FINAL/MoonWalkerSwap-Interface-new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/warrenmason/Documents/MoonWalkerSwap/FINAL/MoonWalkerSwap-Interface-new/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4;import React,{useEffect,useState}from'react';import styled from'styled-components';import{Button,Flex,Input,Text}from'moonwalkerswap-uikit';import{useUserSlippageTolerance}from'state/user/hooks';import QuestionHelper from'../QuestionHelper';var MAX_SLIPPAGE=5000;var RISKY_SLIPPAGE_LOW=50;var RISKY_SLIPPAGE_HIGH=500;var StyledSlippageToleranceSettings=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  margin-bottom: 16px;\\n\"])));var Option=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  padding: 0 4px;\\n\"])));var Options=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  display: flex;\\n  flex-direction: column;\\n\\n  \",\":first-child {\\n    padding-left: 0;\\n  }\\n\\n  \",\":last-child {\\n    padding-right: 0;\\n  }\\n\\n  \",\" {\\n    flex-direction: row;\\n  }\\n\"])),Option,Option,function(_ref){var theme=_ref.theme;return theme.mediaQueries.sm;});var Label=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  align-items: center;\\n  display: flex;\\n  margin-bottom: 8px;\\n\"])));var predefinedValues=[{label:'0.1%',value:0.1},{label:'0.5%',value:0.5},{label:'1%',value:1}];var SlippageToleranceSettings=function SlippageToleranceSettings(_ref2){var translateString=_ref2.translateString;var TranslateString=translateString;var _useUserSlippageToler=useUserSlippageTolerance(),_useUserSlippageToler2=_slicedToArray(_useUserSlippageToler,2),userSlippageTolerance=_useUserSlippageToler2[0],setUserslippageTolerance=_useUserSlippageToler2[1];var _useState=useState(userSlippageTolerance/100),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var handleChange=function handleChange(evt){var inputValue=evt.target.value;setValue(parseFloat(inputValue));};// Updates local storage if value is valid\nuseEffect(function(){try{var rawValue=value*100;if(!Number.isNaN(rawValue)&&rawValue>0&&rawValue<MAX_SLIPPAGE){setUserslippageTolerance(rawValue);setError(null);}else{setError(TranslateString(1144,'Enter a valid slippage percentage'));}}catch(_unused){setError(TranslateString(1144,'Enter a valid slippage percentage'));}},[value,setError,setUserslippageTolerance,TranslateString]);// Notify user if slippage is risky\nuseEffect(function(){if(userSlippageTolerance<RISKY_SLIPPAGE_LOW){setError(TranslateString(1146,'Your transaction may fail'));}else if(userSlippageTolerance>RISKY_SLIPPAGE_HIGH){setError(TranslateString(1148,'Your transaction may be frontrun'));}},[userSlippageTolerance,setError,TranslateString]);return/*#__PURE__*/_jsxs(StyledSlippageToleranceSettings,{children:[/*#__PURE__*/_jsxs(Label,{children:[/*#__PURE__*/_jsx(Text,{style:{fontWeight:600},children:TranslateString(88,'Slippage tolerance')}),/*#__PURE__*/_jsx(QuestionHelper,{text:TranslateString(186,'Your transaction will revert if the price changes unfavorably by more than this percentage.')})]}),/*#__PURE__*/_jsxs(Options,{children:[/*#__PURE__*/_jsx(Flex,{mb:['8px',0],mr:[0,'8px'],children:predefinedValues.map(function(_ref3){var label=_ref3.label,predefinedValue=_ref3.value;var handleClick=function handleClick(){return setValue(predefinedValue);};return/*#__PURE__*/_jsx(Option,{children:/*#__PURE__*/_jsx(Button,{variant:value===predefinedValue?'primary':'tertiary',onClick:handleClick,children:label})},predefinedValue);})}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",children:[/*#__PURE__*/_jsx(Option,{children:/*#__PURE__*/_jsx(Input,{type:\"number\",scale:\"lg\",step:0.1,min:0.1,placeholder:\"5%\",value:value,onChange:handleChange,isWarning:error!==null})}),/*#__PURE__*/_jsx(Option,{children:/*#__PURE__*/_jsx(Text,{fontSize:\"18px\",children:\"%\"})})]})]}),error&&/*#__PURE__*/_jsx(Text,{mt:\"8px\",color:\"failure\",children:error})]});};export default SlippageToleranceSettings;","map":{"version":3,"sources":["/Users/warrenmason/Documents/MoonWalkerSwap/FINAL/MoonWalkerSwap-Interface-new/src/components/PageHeader/SlippageToleranceSetting.tsx"],"names":["React","useEffect","useState","styled","Button","Flex","Input","Text","useUserSlippageTolerance","QuestionHelper","MAX_SLIPPAGE","RISKY_SLIPPAGE_LOW","RISKY_SLIPPAGE_HIGH","StyledSlippageToleranceSettings","div","Option","Options","theme","mediaQueries","sm","Label","predefinedValues","label","value","SlippageToleranceSettings","translateString","TranslateString","userSlippageTolerance","setUserslippageTolerance","setValue","error","setError","handleChange","evt","inputValue","target","parseFloat","rawValue","Number","isNaN","fontWeight","map","predefinedValue","handleClick"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport { Button, Flex, Input, Text } from 'moonwalkerswap-uikit'\nimport { useUserSlippageTolerance } from 'state/user/hooks'\nimport QuestionHelper from '../QuestionHelper'\n\nconst MAX_SLIPPAGE = 5000\nconst RISKY_SLIPPAGE_LOW = 50\nconst RISKY_SLIPPAGE_HIGH = 500\n\nconst StyledSlippageToleranceSettings = styled.div`\n  margin-bottom: 16px;\n`\n\nconst Option = styled.div`\n  padding: 0 4px;\n`\n\nconst Options = styled.div`\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n\n  ${Option}:first-child {\n    padding-left: 0;\n  }\n\n  ${Option}:last-child {\n    padding-right: 0;\n  }\n\n  ${({ theme }) => theme.mediaQueries.sm} {\n    flex-direction: row;\n  }\n`\n\nconst Label = styled.div`\n  align-items: center;\n  display: flex;\n  margin-bottom: 8px;\n`\n\nconst predefinedValues = [\n  { label: '0.1%', value: 0.1 },\n  { label: '0.5%', value: 0.5 },\n  { label: '1%', value: 1 },\n]\n\ntype SlippageToleranceSettingsModalProps = {\n  translateString: (translationId: number, fallback: string) => (string)\n}\n\nconst SlippageToleranceSettings = ({ translateString }: SlippageToleranceSettingsModalProps) => {\n  const TranslateString = translateString\n  const [userSlippageTolerance, setUserslippageTolerance] = useUserSlippageTolerance()\n  const [value, setValue] = useState(userSlippageTolerance / 100)\n  const [error, setError] = useState<string | null>(null)\n  const handleChange = (evt: React.ChangeEvent<HTMLInputElement>) => {\n    const { value: inputValue } = evt.target\n    setValue(parseFloat(inputValue))\n  }\n\n  // Updates local storage if value is valid\n  useEffect(() => {\n    try {\n      const rawValue = value * 100\n      if (!Number.isNaN(rawValue) && rawValue > 0 && rawValue < MAX_SLIPPAGE) {\n        setUserslippageTolerance(rawValue)\n        setError(null)\n      } else {\n        setError(TranslateString(1144, 'Enter a valid slippage percentage'))\n      }\n    } catch {\n      setError(TranslateString(1144, 'Enter a valid slippage percentage'))\n    }\n  }, [value, setError, setUserslippageTolerance, TranslateString])\n\n  // Notify user if slippage is risky\n  useEffect(() => {\n    if (userSlippageTolerance < RISKY_SLIPPAGE_LOW) {\n      setError(TranslateString(1146, 'Your transaction may fail'))\n    } else if (userSlippageTolerance > RISKY_SLIPPAGE_HIGH) {\n      setError(TranslateString(1148, 'Your transaction may be frontrun'))\n    }\n  }, [userSlippageTolerance, setError, TranslateString])\n\n  return (\n    <StyledSlippageToleranceSettings>\n      <Label>\n        <Text style={{ fontWeight: 600 }}>{TranslateString(88, 'Slippage tolerance')}</Text>\n        <QuestionHelper\n          text={TranslateString(\n            186,\n            'Your transaction will revert if the price changes unfavorably by more than this percentage.'\n          )}\n        />\n      </Label>\n      <Options>\n        <Flex mb={['8px', 0]} mr={[0, '8px']}>\n          {predefinedValues.map(({ label, value: predefinedValue }) => {\n            const handleClick = () => setValue(predefinedValue)\n\n            return (\n              <Option key={predefinedValue}>\n                <Button variant={value === predefinedValue ? 'primary' : 'tertiary'} onClick={handleClick}>\n                  {label}\n                </Button>\n              </Option>\n            )\n          })}\n        </Flex>\n        <Flex alignItems=\"center\">\n          <Option>\n            <Input\n              type=\"number\"\n              scale=\"lg\"\n              step={0.1}\n              min={0.1}\n              placeholder=\"5%\"\n              value={value}\n              onChange={handleChange}\n              isWarning={error !== null}\n            />\n          </Option>\n          <Option>\n            <Text fontSize=\"18px\">%</Text>\n          </Option>\n        </Flex>\n      </Options>\n      {error && (\n        <Text mt=\"8px\" color=\"failure\">\n          {error}\n        </Text>\n      )}\n    </StyledSlippageToleranceSettings>\n  )\n}\n\nexport default SlippageToleranceSettings\n"]},"metadata":{},"sourceType":"module"}